:root { 
  --bg-1:#1e1e1e;--bg-2:#252526;--text:#d4d4d4;--muted:#858585;--primary:#007acc;--accent:#3c9dff;--card:#1f2428cc;--radius:18px;--shadow:0 10px 30px rgba(0,0,0,0.25);
      /* App background colors (configurable via front matter) */
      --app-bg1: var(--bg-1);
      --app-bg2: var(--bg-2);
      /* Effect color for particles/gradients (configurable via front matter) */
      --effect-color: var(--accent);
      /* Typography defaults (configurable) */
      --font-primary: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      --font-secondary: Arial, Helvetica, system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      /* Overlay title sizes */
      --title-size: 22px; /* default */
      --subtitle-size: 16px; /* default */
    } 
    *{box-sizing:border-box}
  body{margin:0;font-family:var(--font-primary);color:var(--text);background:linear-gradient(120deg,var(--app-bg1),var(--app-bg2));overflow:hidden;height:100vh;display:flex}
  .bg-gradient{position:fixed;inset:0;z-index:-2;background:linear-gradient(45deg,var(--app-bg1),var(--app-bg2),var(--app-bg1));background-size:400% 400%;animation:moveGradient 30s ease-in-out infinite;filter:saturate(1.1)}
    #bg-canvas{position:fixed;inset:0;z-index:-1;display:none}
    @keyframes moveGradient{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}

  .thumbs{width:220px;background:linear-gradient(180deg,var(--app-bg1, #1e1e1e), var(--app-bg2, #252526));overflow-y:auto;padding:8px;display:flex;flex-direction:column;gap:8px;border-right:1px solid rgba(255,255,255,.08)}
    .thumbs.overlay{position:fixed;left:0;top:0;bottom:0;transform:translateX(-100%);transition:transform .25s ease;z-index:14}
    .thumbs.overlay.open{transform:translateX(0)}
    .thumbs.collapsed{width:0;padding:0;border-right:none}
  /* Thumbnail visuals (CSS-driven)
     Variables:
       --thumb-radius      Border radius for thumbnails
       --thumb-padding     Padding inside each thumbnail
       --thumb-font-size   Font size used in thumbnails
       --thumb-border      Border width for thumbnail frames
       --thumb-transition  Duration for thumb transitions
       --thumb-elevation   Shadow/elevation magnitude used on hover/active
  */
  :root{ --thumb-radius:8px; --thumb-padding:8px; --thumb-font-size:12px; --thumb-border:1px; --thumb-transition:220ms; --thumb-elevation:6px; }
  .thumb{cursor:pointer;padding:var(--thumb-padding);border-radius:var(--thumb-radius);font-size:var(--thumb-font-size);color:var(--text);background:linear-gradient(180deg,var(--app-bg1, #1e1e1e), var(--app-bg2, #252526));border:var(--thumb-border) solid rgba(0,0,0,0.12);transition:transform var(--thumb-transition) ease, box-shadow var(--thumb-transition) ease, border-color var(--thumb-transition) ease, background var(--thumb-transition) ease;transform-origin:left center;display:flex;align-items:center;gap:8px}
  .thumb:hover{ transform: translateY(-4px) scale(1.02); box-shadow: 0 8px 20px rgba(0,0,0,0.18); }
  /* Accessible focus styles for keyboard users */
  .thumb:focus{ outline: none; }
  .thumb:focus-visible{ box-shadow: 0 0 0 3px color-mix(in srgb, var(--accent) 30%, transparent); transform: translateY(-4px) scale(1.02); }
  /* Active slide in the thumbnails reflects theme colors: subtle scale + accent outline */
  /* Use background shorthand so computed background includes our gradient for automated checks */
  /* Ensure computed backgroundImage reflects the active gradient explicitly for testing */
  .thumb.active{background:var(--thumb-active-bg, linear-gradient(135deg,var(--primary),var(--accent))) !important;background-image:var(--thumb-active-bg, linear-gradient(135deg,var(--primary),var(--accent))) !important;color:#fff;border-color:color-mix(in srgb, var(--accent) 40%, transparent);transform:translateY(-2px) scale(1.04);box-shadow:0 10px 28px color-mix(in srgb, var(--accent) 18%, rgba(0,0,0,0.18));}
  /* Slightly emphasize active thumb with an inner ring on larger displays */
  @media (min-width:720px){ .thumb.active{ outline: 2px solid color-mix(in srgb, var(--accent) 30%, transparent); outline-offset:2px; } }

    .deck{position:relative;flex:1;height:100vh;overflow:hidden}
    .deck-header{position:absolute;top:14px;left:24px;right:24px;display:flex;align-items:center;justify-content:space-between;z-index:5}
  /* Show brand as plain text (no pill) so presets like Arctic Daylight don't create a grey rounded background */
  .brand{display:flex;align-items:center;gap:12px;padding:0;background:transparent;border-radius:0;box-shadow:none}
    .brand-badge{height:28px;width:28px;border-radius:8px;background:linear-gradient(135deg,var(--primary),var(--accent))}
    .brand-name{font-weight:700}
    .deck-tools{display:flex;gap:8px;align-items:center}
  /* Buttons use a subtle translucent overlay so text remains readable on light and dark app backgrounds */
  .btn{cursor:pointer;padding:6px 10px;border-radius:12px;color:var(--text);background:var(--btn-bg, transparent);border-style:solid;border-color:var(--btn-border-color, rgba(255,255,255,.18));border-width:calc(var(--btn-border-width, 1px) + var(--btn-border-extra, 0px));backdrop-filter:blur(6px);font-size:12px;line-height:1;display:inline-flex;align-items:center;min-height:32px}
  /* Keep header buttons stable regardless of drawer state */
  .deck-header .btn{ border-radius:12px; padding:8px 12px; min-height:32px; }
  /* Use CSS variables for button background so themes can update them consistently */
  :root{ --btn-bg: transparent; --btn-text: var(--text); --btn-border-width: 1px; --btn-border-extra: 0px; --btn-border-extra-hover: 1px; --btn-border-color: rgba(255,255,255,.28); --btn-border-color-hover: color-mix(in srgb, var(--accent) 40%, rgba(255,255,255,.28)); --outline-w: 1px; }
  .btn{ background: var(--btn-bg); color: var(--btn-text); }
  .btn:hover, .btn:focus-visible{ border-width: calc(var(--btn-border-width, 1px) + var(--btn-border-extra-hover, var(--btn-border-extra, 0px))); border-color: var(--btn-border-color-hover, var(--btn-border-color)); }

    /* Reserve space using CSS vars so we can position the frame precisely */
    :root{ --pad-top:96px; --pad-bottom:120px; --pad-side:72px }
    .slides{position:absolute;inset:0;display:block}
    body.ui-off :root{ --pad-top:24px; --pad-bottom:32px }
  /* A single framed slide that fills the padded area and scrolls internally */
  .slide{position:absolute;top:var(--pad-top);bottom:var(--pad-bottom);left:var(--pad-side);right:var(--pad-side);display:block;background:linear-gradient(180deg,var(--slide-bg1, rgba(31,36,40,.75)),var(--slide-bg2, rgba(27,32,36,.55)));border-radius:var(--radius);box-shadow:var(--slide-shadow, var(--shadow));opacity:0;transform:translate3d(60px,0,0) scale(.98);transition:all 0.6s cubic-bezier(0.4, 0, 0.2, 1);backdrop-filter:blur(var(--slide-blur, 8px));padding:0;overflow:hidden;outline:none}
  .slide .content-scroll{position:relative;height:100%;width:100%;overflow:auto;padding:56px 48px 96px 48px;display:flex;justify-content:var(--content-x, flex-start);align-items:var(--content-y, flex-start)}
  /* Slide title/subtitle overlay */
  .slide .slide-overlay{position:absolute;pointer-events:none;z-index:50;max-width:70%;display:flex;flex-direction:column;gap:4px;text-shadow:0 1px 2px rgba(0,0,0,.35)}
  .slide .slide-overlay.pos-tl{top:18px;left:24px;text-align:left}
  .slide .slide-overlay.pos-tr{top:18px;right:24px;text-align:right}
  .slide .slide-overlay.pos-bl{bottom:18px;left:24px;text-align:left}
  .slide .slide-overlay.pos-br{bottom:18px;right:24px;text-align:right}
  .slide .slide-overlay .slide-title{color:var(--primary);font-family:var(--font-primary);font-weight:800;font-size:var(--title-size);line-height:1.15;letter-spacing:-0.01em}
  .slide .slide-overlay .slide-subtitle{color:var(--primary);font-family:var(--font-secondary);font-weight:400;font-size:var(--subtitle-size);line-height:1.2;opacity:.95}
  .slide .slide-overlay .accent-subtitle{ color: var(--accent); }
  /* Theme outline around the active slide, uses accent; width configurable via --outline-w; can be disabled via body.border-off */
  .slide.active::before{content:"";position:absolute;inset:0;border-radius:var(--radius);pointer-events:none;z-index:40;box-shadow:inset 0 0 0 var(--outline-w, 1px) var(--accent)}
  body.border-off .slide.active::before{box-shadow:none}
    .slide.active{opacity:1;transform:translate3d(0,0,0) scale(1);z-index:2}
    .slide.prev{opacity:0;transform:translate3d(-50px,0,0) scale(.98);z-index:1}
    .slide.slide-in-right{opacity:0;transform:translate3d(100px,0,0) scale(.95)}
    .slide.slide-in-left{opacity:0;transform:translate3d(-100px,0,0) scale(.95)}
    .slide.slide-out-left{opacity:0;transform:translate3d(-100px,0,0) scale(.95)}
    .slide.slide-out-right{opacity:0;transform:translate3d(100px,0,0) scale(.95)}

.md{width:min(1100px,92%)}
  .md ul,.md ol{padding-left:20px;margin:16px 0}
  .md li{margin:8px 0}
  .md ul li{list-style-type:disc}
  .md ol li{list-style-type:decimal}
    .md blockquote{border-left:4px solid var(--accent);padding-left:16px;margin:16px 0;font-style:italic;color:var(--muted)}
    .md img{max-width:100%;height:auto;border-radius:8px;margin:16px 0}
    .md a{color:var(--accent);text-decoration:none}
    .md a:hover{text-decoration:underline}
  /* Headings hierarchy */
  .md h1{font-size:clamp(28px,3.2vw,40px);line-height:1.2;margin:0 0 12px;font-weight:800}
  .md h2{font-size:clamp(22px,2.4vw,30px);line-height:1.25;margin:18px 0 10px;font-weight:700}
  .md h3{font-size:clamp(18px,1.9vw,24px);line-height:1.3;margin:16px 0 8px;font-weight:700;color:var(--text)}
  /* Tables */
  .md table{width:100%;border-collapse:collapse;margin:16px 0;border:1px solid rgba(255,255,255,.08);border-radius:8px;overflow:hidden}
  .md th,.md td{padding:10px 12px;border:1px solid rgba(255,255,255,.08)}
  .md thead th{background:rgba(255,255,255,.06);font-weight:700}
  .md tbody tr:nth-child(odd) td{background:rgba(255,255,255,.03)}
  /* Columns shortcode */
  .md .cols{display:flex;gap:24px;align-items:flex-start}
  .md .cols .col{flex:1;min-width:0}
  @media (max-width: 820px){.md .cols{flex-direction:column}}
    pre{background:rgba(0,0,0,.35);padding:10px;border-radius:8px;overflow:auto}
    code{font-family:monospace}

    .deck-footer{position:absolute;left:24px;right:24px;bottom:18px;display:flex;align-items:center;justify-content:space-between;z-index:5}
    .progress{flex:1;height:8px;border-radius:999px;background:rgba(255,255,255,.08);overflow:hidden}
    .progress>span{display:block;height:100%;width:0%;background:linear-gradient(90deg,var(--primary),var(--accent))}

    .notes{position:absolute;bottom:0;left:0;right:0;background:rgba(0,0,0,.95);color:#ffffff;padding:20px 24px;font-size:16px;font-weight:500;display:none;z-index:10;max-height:30%;overflow:auto;border-top:3px solid var(--accent);box-shadow:0 -4px 20px rgba(0,0,0,0.5)}
    .notes.show{display:block}

    #scrim{position:fixed;inset:0;background:rgba(0,0,0,.5);display:none;z-index:13}

    /* Config modal */
    #cfgOverlay{position:fixed;inset:0;background:rgba(0,0,0,.35);backdrop-filter:blur(2px);display:none;z-index:30}
  /* Use app background variables so the Style modal previews theme immediately */
  #cfgModal{position:fixed;top:20px;bottom:20px;left:20px;right:20px;transform:none;width:auto;max-width:none;background:linear-gradient(135deg,var(--app-bg1, #1e1e1e),var(--app-bg2, #252526));color:var(--text);border:1px solid rgba(255,255,255,.08);border-radius:12px;box-shadow:var(--shadow);display:none;z-index:31;flex-direction:column}
  #cfgModal header{display:flex;align-items:center;justify-content:space-between;padding:12px 14px;border-bottom:1px solid rgba(255,255,255,.08);flex:0 0 auto}
  #cfgModal main{padding:14px;overflow:auto;flex:1 1 auto}
  /* Style UI layout */
  #cfgModal .cfg-grid{ display:grid; grid-template-columns: 1fr; gap:12px; align-content:start; }
  #cfgModal .cfg-col{ display:flex; flex-direction:column; gap:12px; }
  /* Two-column layout on wide screens */
  @media (min-width: 980px){ #cfgModal .cfg-grid{ grid-template-columns: 1.4fr .9fr; } }
  /* Section cards */
  #cfgModal .cfg-section{ border:1px solid rgba(255,255,255,0.08); border-radius:12px; padding:12px; background:rgba(255,255,255,0.02); }
  #cfgModal .cfg-section-title{ margin:0 0 8px 0; font-size:13px; font-weight:700; color:var(--text); opacity:.95; }
  #cfgModal .cfg-section .subtle{ font-size:12px; opacity:.8; }
  #cfgModal .field-grid{ display:grid; grid-template-columns: repeat(2, minmax(0,1fr)); gap:10px; }
  @media (max-width: 640px){ #cfgModal .field-grid{ grid-template-columns: 1fr; } }
  /* Compact inline control rows */
  #cfgModal .inline{ display:flex; gap:8px; align-items:center; flex-wrap:wrap; }
  #cfgModal label{display:block;font-size:12px;color:var(--muted);margin:10px 0 6px}
  /* Ensure modal labels and form text follow the configured --text color */
  #cfgModal, #cfgModal *{ color: inherit; }
  #cfgModal { color: var(--text); }
  #cfgModal label{ color: var(--text); }
  /* Ensure modal buttons reflect the same button styling as the app */
  #cfgModal .btn{ color: var(--btn-text) !important; background: var(--btn-bg); border-color: var(--btn-border-color); border-style: solid; border-width: calc(var(--btn-border-width, 1px) + var(--btn-border-extra, 0px)); }
  #cfgModal .btn:hover, #cfgModal .btn:focus-visible{ border-width: calc(var(--btn-border-width, 1px) + var(--btn-border-extra-hover, var(--btn-border-extra, 0px))); border-color: var(--btn-border-color-hover, var(--btn-border-color)); }
  :root { --admon-note:#60a5fa; --admon-tip:#34d399; --admon-warning:#fbbf24; }
  /* Admonitions */
  .admonition{border:1px solid rgba(255,255,255,0.08);border-radius:10px;margin:12px 0;overflow:hidden;background:rgba(255,255,255,0.02)}
  .admonition .admonition-title{font-weight:600;padding:8px 12px;font-size:13px;background:rgba(255,255,255,0.03);border-bottom:1px solid rgba(255,255,255,0.06)}
  .admonition .admonition-body{padding:10px 12px}
  .admonition.note .admonition-title{color:var(--admon-note)}
  .admonition.tip .admonition-title{color:var(--admon-tip)}
  .admonition.warning .admonition-title{color:var(--admon-warning)}
  /* Task lists */
  li.task{list-style:none}
  li.task::marker{content:''}
  li.task{padding-left:2px}
  /* Heading anchor hint area */
  h1[id], h2[id], h3[id]{scroll-margin-top: 80px}
  .anchor-link{margin-left:8px;opacity:.0;transition:opacity .15s ease;color:var(--muted);text-decoration:none}
  h1[id]:hover .anchor-link, h2[id]:hover .anchor-link, h3[id]:hover .anchor-link{opacity:1}
  /* Small helper for muted lead text in demo content */
  .muted-lead{color:var(--muted);margin:-6px 0 12px 0}
  #cfgModal input[type="text"]{width:100%;padding:8px 10px;border-radius:8px;border:1px solid rgba(255,255,255,.18);background:rgba(255,255,255,0.03);color:var(--text)}
  #cfgModal input[type="color"]{width:54px;height:32px;padding:0;border:1px solid rgba(255,255,255,.18);border-radius:8px;background:transparent;color:var(--text)}
    #cfgModal .row{display:flex;gap:10px;align-items:center}
  #cfgModal footer{display:flex;gap:8px;justify-content:flex-end;padding:12px 14px;border-top:1px solid rgba(255,255,255,.08);flex:0 0 auto;background:linear-gradient(180deg, rgba(0,0,0,0.06), rgba(0,0,0,0.12));backdrop-filter:blur(4px)}
  /* Active state for overlay position buttons */
  #cfgOverlayPos .btn{
    min-width:44px; height:32px; box-sizing:border-box; text-align:center; padding:8px 10px; line-height:1;
    display:inline-flex; align-items:center; justify-content:center; white-space:nowrap; font-weight:600;
    background: var(--btn-bg);
    color: var(--btn-text);
    border-style: solid;
    border-color: var(--btn-border-color, rgba(255,255,255,0.06));
    border-width: calc(var(--btn-border-width, 1px) + var(--btn-border-extra, 0px));
  }
  #cfgOverlayPos .btn:hover,
  #cfgOverlayPos .btn:focus-visible{
    border-width: calc(var(--btn-border-width, 1px) + var(--btn-border-extra-hover, var(--btn-border-extra, 0px)));
    border-color: var(--btn-border-color-hover, var(--btn-border-color));
  }
  #cfgOverlayPos .btn.active,
  #cfgOverlayPos .btn[aria-pressed="true"]{
    border-color: var(--accent);
    box-shadow: 0 0 0 1px var(--accent) inset;
    background: color-mix(in srgb, var(--accent) 12%, transparent);
    color: var(--btn-text);
  }
  /* Base style for preset buttons should match other small controls (no gradient) */
  .preset-btn{
    display:inline-block;
    padding:10px 18px;
    margin:6px 8px;
    border-radius:12px;
    background: var(--btn-bg);
    color: var(--btn-text);
    border-style: solid;
    border-color: var(--btn-border-color, rgba(255,255,255,0.06));
    border-width: calc(var(--btn-border-width, 1px) + var(--btn-border-extra, 0px));
  }
  .preset-btn:hover, .preset-btn:focus-visible{ border-width: calc(var(--btn-border-width, 1px) + var(--btn-border-extra-hover, var(--btn-border-extra, 0px))); border-color: var(--btn-border-color-hover, var(--btn-border-color)); }
  /* Active state for preset buttons (compact segmented control)
     Place after base block so it overrides background consistently */
  #cfgModal .preset-btn.active,
  #cfgModal .preset-btn[aria-pressed="true"]{
    border-color: var(--accent);
    /* Match overlay-position selected appearance: subtle accent tint and inset highlight */
    box-shadow: 0 0 0 1px var(--accent) inset;
    background: color-mix(in srgb, var(--accent) 12%, transparent);
    color: var(--btn-text);
  }
  /* Disabled state for overlay position buttons */
  #cfgOverlayPos .btn[disabled],
  #cfgOverlayPos .btn[aria-disabled="true"]{
    opacity: .5;
    cursor: not-allowed;
    filter: grayscale(30%);
    height:32px; min-width:44px; /* keep dimensions stable when disabled */
  }
  /* Disabled style for range sliders within modal */
  #cfgModal input[type="range"][disabled]{
    opacity: .5;
    cursor: not-allowed;
    filter: grayscale(20%);
  }
  /* Disabled style for select and checkbox within modal */
  #cfgModal select[disabled],
  #cfgModal input[type="checkbox"][disabled]{
    opacity: .6;
    cursor: not-allowed;
  }

    @media print{body{overflow:visible;background:#fff;color:#000}.deck-header,.deck-footer,.bg-gradient,#bg-canvas,.thumbs,.notes{display:none!important}.slide{position:static;opacity:1;transform:none;page-break-after:always;box-shadow:none;background:#fff;color:#000}}

  /* UI visibility toggle (configurable) */
  body.ui-off .deck-header { display: none !important; }
  body.ui-off.hide-slides .thumbs { display: none !important; }
  body.ui-off.hide-slides .thumbs.overlay { transform: translateX(-100%) !important; }
  body.ui-off.hide-progress .deck-footer .progress,
  body.ui-off.hide-progress .deck-footer > div:first-child,
  body.ui-off.hide-progress .deck-footer #slideNo { display: none !important; }
  body.ui-off #scrim { display: none !important; }
  /* Progress key-toggle overrides */
  body.progress-on .deck-footer .progress,
  body.progress-on .deck-footer > div:first-child,
  body.progress-on .deck-footer #slideNo { display: block !important; }
  body.ui-off.hide-progress.progress-on .deck-footer .progress,
  body.ui-off.hide-progress.progress-on .deck-footer > div:first-child,
  body.ui-off.hide-progress.progress-on .deck-footer #slideNo { display: block !important; }
  body.progress-off .deck-footer .progress,
  body.progress-off .deck-footer > div:first-child,
  body.progress-off .deck-footer #slideNo { display: none !important; }

  /* Toast (lightweight notification) */
  .toast{position:fixed;left:28px;bottom:28px;z-index:50;display:none;padding:10px 12px;border-radius:10px;background:rgba(17,24,39,.85);border:1px solid rgba(255,255,255,.12);color:var(--text);box-shadow:var(--shadow);font-size:14px;opacity:0;transform:translateY(8px);transition:opacity .2s ease, transform .2s ease}
  .toast.show{display:block;opacity:1;transform:translateY(0)}
  .toast.no-anim{transition:none}
